- name: Pull NOC Customizations
  hg:
    repo: "{{ noc_custom_repo [3:] }}"
    dest: "{{noc_root}}/custom"
    revision: "{{ noc_custom_version }}"
    update: yes
    force: yes
    purge: yes
  when:
    - noc_custom_enabled
    - noc_custom_repo is defined
    - noc_custom_version is defined
    - noc_custom_version
  environment:
    LC_ALL: C
  tags:
    - mercurial
    - custom
