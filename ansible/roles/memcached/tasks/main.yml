- name: "Include OS-specific tasks"
  include: "os/{{ ansible_distribution }}/main.yml"

- name: Install memcached monitoring
  template:
    src: "etc/telegraf/telegraf.d/memcached.conf.j2"
    dest: "{{ telegraf_confd_path }}/memcached.conf"
  notify: reload telegraf
  tags:
    - config
    - telegraf


- name: Install memcached config
  template:
    src: "etc/{{ ansible_distribution }}/memcached.conf.j2"
    dest: "{{ memcahed_conf }}"
  notify: reload memcached
  tags:
    - config

- name: copy memcached consul templates
  template:
    src: memcached.json.j2
    dest: "{{consul_configd_path}}/memcached.json"
  notify: reload consul
  tags:
    - consul