---
# File: main.yml - Handlers for Consul template

- name: reload systemd
  become: yes
  systemd:
    name: consul-template
    daemon_reload: yes

- name: restart consul-template
  become: yes
  service:
    name: consul-template
    state: restarted

- name: reload consul-template
  become: yes
  service:
    name: consul-template
    state: reloaded
  when: "'Linux' in ansible_system"

- name: freebsd reload consul-template
  become: yes
  service:
    name: consul-template
    state: restarted
  when: "'FreeBSD' in ansible_system"

- name: start consul-template
  become: yes
  service:
    name: consul-template
    enabled: yes
    state: started

- name: reload telegraf
  become: yes
  service:
    name: telegraf
    state: reloaded

