- name: fail if consul-template is not selected
  fail:
    msg: "Nsqd role have to be set along with consul-template role to get access to nsqlookup service."
  when:
    - has_svc_nsqd is defined
    - has_svc_consul_template is not defined