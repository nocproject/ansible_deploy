---
- name: reload systemd
  systemd:
    name: nsqd
    daemon_reload: yes

- name: restart consul-template
  become: yes
  service:
    name: consul-template
    state: restarted

- name: freebsd reload consul
  become: yes
  service:
    name: consul
    state: reloaded
  when: "'Linux' in ansible_system"

- name: reload consul
  become: yes
  service:
    name: consul
    state: restarted
  when: "'FreeBSD' in ansible_system"

- name: reload telegraf
  become: yes
  service:
    name: telegraf
    state: reloaded

- name: restart nsqd
  become: yes
  service:
    name: nsqd
    state: restarted

- name: reload nsqd
  become: yes
  service:
    name: nsqd
    state: reloaded