---
- name: import path to control repo
  include_vars: "vars/{{ ansible_distribution }}.yml"

# https://github.com/ansible/ansible/issues/18665#issuecomment-350144774
- name: Ansible full of bugs
  set_fact:
    ansibe_correct_python: "{{ansible_python_interpreter}}"
    ansible_python_interpreter: "{{consul_control_python}}"

- name: Register a key/value pair for {{consul_service_key}}
  consul_kv:
    key: "{{consul_service_key}}"
    value: "{{consul_service_value}}"

- name: Ansible full of bugs 2
  set_fact:
    ansible_python_interpreter: "{{ansibe_correct_python}}"